---
import { FaBars, FaStore } from "react-icons/fa/index";
import { MdApps, MdPhoneIphone, MdDevices } from "react-icons/md/index";

// import "../css/main.css";

interface Props {
  invisible?: boolean;
}

const { invisible = false } = Astro.props;
const idPrefix = invisible ? "invisible-" : "";
const headerClassPrefix = invisible ? "invisible" : "fixed";
---

<header
  id={`--c2dev-${idPrefix}navbar-header`}
  class={`${headerClassPrefix} flex justify-between items-center z-[100] w-full py-3 font-serif text-gray-900 bg-white top-0 left-0 transition duration-300`}
>
  <a href="/">
    <!-- <img src="/c2logoblack.png" class="h-16 ml-10 lg:ml-10 cursor-pointer"/> -->
    <svg
      id={`--c2dev-${idPrefix}navbar-c2logo`}
      class="h-16 ml-10 lg:ml-10 cursor-pointer hover:fill-blue-700 hover:transition-all duration-300"
      data-name="Layer 1"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 1920 540"
    >
      <path
        d="m426.36,146.91c-.33.32-.27.48.19.48h29.23c.28,0,.5.22.5.5v16.25c0,.33-.17.5-.5.5h-55c-.33,0-.5-.17-.5-.5v-11.51c0-.4.15-.77.43-1.05,11.65-11.65,23-22.98,34.07-33.97,3.97-3.94,6.27-8.02,6.54-13.42.31-6.35-3.54-12.04-9.59-13.48-2.63-.63-5.95-.45-9.97.53-5.27,1.28-10,3.68-14.19,7.2-.21.18-.53.14-.7-.07,0,0-.01-.01-.02-.02l-6.26-8.34c-.25-.34-.21-.64.14-.89,4.75-3.38,9.19-6.14,13.34-8.28,2.7-1.39,5.86-2.25,9.47-2.58,10.3-.93,18.73,1.57,25.3,7.48,8.55,7.7,10.01,21.7,4.06,31.4-2.2,3.58-5.29,7.56-9.26,11.93-6.61,7.27-12.37,13.21-17.28,17.84Z"
      ></path>
      <path
        d="m80.48,413.65c89.03-.04,178.08-.03,267.15.03,9.91,0,20.09.35,30.15.26.33,0,.5.16.5.49v42.96c0,.14-.12.26-.26.26H37.53c-.14,0-.25-.12-.25-.26h0V120.39c0-.17.08-.25.25-.25h337c.55,0,1,.45,1,1v38.5c0,.33-.17.5-.5.5H80.28c-.33,0-.5.17-.5.5v252.31c0,.47.23.71.7.7Z"
      ></path>
      <path
        d="m759.66,404.39h73.12c.16,0,.24.08.24.25v19.27c.01.35-.16.52-.51.52l-72.94-.37c-.36,0-.54.18-.54.54v16.79c0,.33.17.5.5.5h72.91c.36,0,.65.29.65.65,0,0,0,.01,0,.02l-.37,18.58c0,.34-.18.51-.52.51-25.84-.03-52.24-.02-79.19,0-6.95.01-14.78-9.77-14.76-16.68.05-20.25.05-39.97.01-59.16,0-1.51.36-3,1.09-4.47,3.22-6.51,10.07-12.25,17.7-12.24,24.94.04,49.99.05,75.15.02.34,0,.51.17.52.51l.37,16.34c.01.35-.27.65-.63.66,0,0-.01,0-.02,0h-72.91c-.33,0-.5.17-.5.5v16.63c0,.41.21.62.63.62Z"
      ></path>
      <path
        d="m1591.23,386.85c-.03-9.58,9.68-17.72,18.97-17.71,19.23.02,37.41,0,54.52-.04,9.75-.03,17.89,7.21,17.84,17.23-.09,16.87-.08,34.81.05,53.84.03,3.79-.43,6.93-1.38,9.44-1.74,4.62-7.48,12.05-13.24,12.05-21.49-.02-41.93-.02-61.32,0-1.27,0-2.52-.37-3.73-1.1-4.93-2.97-8.42-7.1-10.46-12.4-.81-2.1-1.21-4.56-1.2-7.37.03-16.64.02-34.62-.05-53.93Zm70.56,3.31c0-.15-.12-.27-.27-.27h-49.22c-.15,0-.27.12-.27.27h0v49.2c0,.15.12.27.27.27h49.22c.15,0,.27-.12.27-.27h0v-49.2Z"
      ></path>
      <path
        d="m1160.53,424.79v16.73c0,.34.28.62.62.62h72.85c.4,0,.59.2.57.6-.32,6.08-.4,12.16-.24,18.25,0,.44-.21.66-.65.66-28.53-.02-55.14-.02-79.81,0-5.69,0-10.8-6.63-13.04-11.53-.77-1.67-1.14-3.72-1.13-6.13.13-18.78.14-37.94.03-57.49-.01-1.87.39-3.6,1.2-5.21,3.16-6.28,9.82-11.96,17.26-11.94,25.89.05,51.02.06,75.37.03.43,0,.64.21.65.64l.24,16.03c0,.32-.25.58-.57.59,0,0,0,0-.01,0h-72.84c-.33,0-.5.17-.5.5v17c0,.33.17.5.5.5h73c.33,0,.5.17.5.5v18.83c0,.38-.19.57-.57.57l-72.83-.36c-.4,0-.6.2-.6.61Z"
      ></path>
      <path
        d="m941.52,387.75c-.02-9.79,9.76-17.91,19.28-17.88,17.53.04,35.88.04,55.06,0,4.37,0,7.95,1.67,11.29,4.41,3.81,3.13,5.73,7.29,5.76,12.46.08,16.03.16,33.26.23,51.67.02,5.26-.49,9.26-1.53,12.01-1.64,4.33-4.75,7.96-9.33,10.89-1.15.73-2.4,1.1-3.77,1.1-21.19-.04-41.61-.04-61.28.01-1.33,0-2.53-.31-3.58-.94-7.23-4.32-12.17-11.75-12.15-20.23.05-17.99.06-35.83.02-53.5Zm70.51,3.14c0-.14-.12-.26-.26-.26h-49.24c-.14,0-.26.12-.26.26h0v49.24c0,.14.12.26.26.26h49.24c.14,0,.26-.12.26-.26h0v-49.24Z"
      ></path>
      <path
        d="m515.51,370.4c5.5,0,11.5,4.41,14.08,8.91,1.12,1.97,1.71,4.74,1.77,8.3.21,13.41.22,26.1.02,38.05-.11,6.49-.11,12.53,0,18.13.14,8.22-2.43,13.93-9.92,17.8-1.37.71-2.76,1.06-4.17,1.06-26.16,0-51.82,0-76.98-.02-.15,0-.27-.12-.27-.27v-91.69c0-.15.13-.28.29-.28h0c25.16,0,50.22,0,75.19.01Zm-4.98,21.01c0-.15-.12-.27-.27-.27h-49.22c-.15,0-.27.12-.27.27h0v49.22c0,.15.12.27.27.27h49.22c.15,0,.27-.12.27-.27h0v-49.22Z"
      ></path>
      <path
        d="m562.03,425.79v16.85c0,.33.17.5.5.5h73.04c.36,0,.54.18.54.54l-.29,18.39c0,.39-.19.58-.58.58-28.56-.01-55.18-.01-79.85,0-5.65,0-10.65-6.48-12.98-11.45-.77-1.64-1.16-3.5-1.15-5.58.03-20.94.04-40.59.03-58.96,0-1.35.38-2.77,1.13-4.27,3.25-6.45,9.83-12.04,17.36-12.03,25.85.03,51.01.05,75.48.04.36,0,.54.18.55.54l.3,16.16c0,.36-.17.54-.54.54h-73.05c-.33.01-.49.18-.49.51v17.24c0,.14.11.25.25.25h73.25c.33,0,.5.17.5.5v18.83c0,.39-.19.58-.58.58l-72.82-.36c-.4,0-.6.19-.6.6Z"
      ></path>
      <path
        d="m688.45,441.67l23.44-21.19c.09-.08.14-.2.14-.32v-49.35c0-.23.19-.42.42-.42h20.91c.23,0,.42.19.42.42v57.59c0,.12-.05.24-.14.32l-37.33,33.81c-.08.07-.18.11-.28.11h-16.34c-.11,0-.21-.04-.29-.11l-36.74-34.38c-.08-.08-.13-.19-.13-.3v-57.04c0-.23.19-.42.42-.42h19.91c.23,0,.42.19.42.42v49.42c0,.12.06.24.15.32l24.46,21.13c.16.14.4.14.56-.01Z"
      ></path>
      <path
        d="m862.84,443.14h70.69c.33,0,.5.17.5.5v18.71c0,.19-.1.28-.29.28-27.53.02-54.36.02-80.49,0-1.19,0-2.3-.35-3.35-1.05-5.48-3.68-7.19-8.64-7.17-15.24.08-25.32.09-50.53.02-75.62,0-.18.14-.32.32-.32h19.17c.12,0,.21.09.21.2.18,16.72.17,31.98-.04,45.77-.13,8.77-.17,17.51-.11,26.24,0,.36.18.54.54.54Z"
      ></path>
      <path
        d="m1295.01,425.46c5.39,6.23,11.21,12.4,17.44,18.52.27.26.63.41,1.01.41h18.07c.33,0,.5.17.5.5v14.95c0,.35-.18.53-.53.54-7.09.05-13.91.03-20.45-.04-5.06-.06-9.64-2.84-13.05-6.59-8.99-9.87-17.71-19.29-26.15-28.24-.23-.25-.52-.37-.85-.37h-11.22c-.33,0-.5.17-.5.5v34.5c0,.14-.11.25-.25.25h-18.75c-.33,0-.5-.17-.5-.5v-89c0-.34.17-.51.51-.51,24.98.03,50,.02,75.07-.02,6.1,0,11.79,5.47,14.55,10.52.82,1.51,1.22,3.15,1.19,4.92-.12,7.44-.12,14.61,0,21.5.15,8.96-6.98,18.05-16.48,17.91-6.88-.1-13.37-.11-19.48-.04-.1,0-.18.09-.18.18,0,.04.02.08.05.11Zm16.66-38.41c-.5-.27-1.04-.41-1.62-.41h-50.27c-.33,0-.5.17-.5.5v20.25c0,.33.17.5.5.5h51.02c2.18,0,3.95-1.75,3.97-3.93.04-4.14.03-8.04-.03-11.71-.04-2.37-1.06-4.11-3.07-5.2Z"
      ></path>
      <path
        d="m1409.53,389.39v53.25c0,.33.17.5.5.5h49.75c.33,0,.5-.17.5-.5v-15.75c0-.33-.17-.5-.5-.5h-33c-.33,0-.5-.17-.5-.5v-17.5c0-.33.17-.5.5-.5h55c.33,0,.5.17.5.5v42.3c0,.44-.12.84-.35,1.21-2.24,3.53-5.2,6.42-8.88,8.68-1.17.72-2.43,1.08-3.78,1.08-22.25-.02-44.32-.03-66.19-.02-.4,0-.79-.11-1.13-.32-4.5-2.79-7.73-6.58-9.69-11.37-.93-2.27-1.37-5.2-1.33-8.81.17-16.32.19-33.73.04-52.23-.05-7.23,6.28-14.59,11.91-18.15.4-.25.83-.37,1.3-.37h76.35c.33,0,.5.17.5.5v17.75c0,.14-.11.25-.25.25h-70.75c-.33,0-.5.17-.5.5Z"
      ></path>
      <path
        d="m1511.78,425.77v34.12c0,.33-.17.5-.5.5h-18.5c-.33,0-.5-.17-.5-.5v-89.21c0-.19.1-.29.29-.29,24.64,0,49.76,0,75.37-.01,6.17,0,11.98,5.68,14.65,10.82.67,1.29.99,2.62.98,3.98-.09,7.03-.08,14.31.03,21.84.11,7.55-3.68,13.62-10.46,16.96-1.77.87-3.87,1.29-6.32,1.24-6.03-.13-12.42-.14-19.17-.04-.08,0-.14.06-.14.14,0,.03.01.07.03.09,5.53,6.42,11.33,12.61,17.4,18.56.27.27.64.42,1.02.42h18.07c.33,0,.5.17.5.5v14.97c0,.39-.2.58-.59.57-5.88-.11-11.51-.09-16.89.04-6.96.18-11.91-1.64-16.52-6.71-8.71-9.56-17.43-18.99-26.17-28.28-.21-.23-.48-.34-.79-.34h-11.17c-.41,0-.62.21-.62.63Zm50.38-39.13h-49.76c-.41,0-.62.21-.62.63v20.12c0,.33.17.5.5.5h51.25c2.07,0,3.75-1.68,3.75-3.75h0v-12.37c0-2.83-2.29-5.13-5.12-5.13h0Z"
      ></path>
      <path
        d="m1764.03,441.53v-70.78c0-.2.16-.36.36-.36h17.79c.2,0,.36.16.36.36l-.03,75.97c0,.07-.02.13-.06.19l-8.43,13.31c-.07.11-.18.17-.31.17h-73.16c-.11,0-.21-.05-.28-.13l-9.91-12.13c-.05-.07-.08-.15-.08-.23v-77.15c0-.2.16-.36.36-.36h17.53c.2,0,.36.16.36.36v70.78c0,.2.16.36.36.36h54.78c.2,0,.36-.16.36-.36Z"
      ></path>
      <path
        d="m1811.03,425.68v34.21c0,.33-.17.5-.5.5h-18.49c-.33,0-.5-.16-.5-.49v-88.96c-.01-.31.24-.56.55-.56h0c25.01.03,49.97.02,74.88-.02,1.78,0,3.38.35,4.8,1.05,4.32,2.12,10.87,7.92,10.8,13.32-.09,7.5-.08,15.26.03,23.29.11,7.06-4.07,12.93-10.31,15.96-1.65.8-3.43,1.2-5.35,1.19-18.45-.04-36.91-.05-55.38-.02-.35,0-.53.18-.53.53Zm52.82-17.97c1.65-.55,2.68-2.54,2.68-4.23.01-3.78,0-7.57-.02-11.38-.03-3.02-2.49-5.46-5.51-5.46h-49.47c-.28,0-.5.22-.5.5v20.25c0,.33.17.5.5.5h51.21c.38,0,.75-.06,1.11-.18Z"
      ></path>
      <path
        d="m1060.28,426.94v34.2c0,.33-.17.5-.5.5h-18.5c-.33,0-.49-.17-.49-.5v-89.47c-.01-.16.12-.29.28-.29h0c24.87.03,49.7.02,74.47-.02,1.97,0,3.76.38,5.38,1.15,4.58,2.17,11.2,8.18,11.14,13.9-.07,7.19-.06,14.36.04,21.51.11,7.75-3.84,14.14-10.96,17.39-1.67.76-3.47,1.14-5.38,1.13-18.03-.07-36.35-.08-54.94-.03-.36,0-.54.18-.54.53Zm51.97-38.97c-.45-.22-.94-.33-1.43-.33h-50.04c-.33,0-.5.17-.5.5v20.5c0,.33.17.5.5.5h50.79c2.33,0,4.21-1.89,4.21-4.22,0-.01,0-.03,0-.04-.03-3.4-.02-7.02.05-10.87.04-2.54-1.29-4.92-3.58-6.04Z"
      ></path>
    </svg>
  </a>
  <div
    id={`--c2dev-${idPrefix}navbar-hamburger`}
    class="hidden resp:flex justify-center items-center mr-5 w-10 h-10 text-2xl bg-[rgba(255,255,255,0.2)] hover:bg-[rgba(255,255,255,0.3)] rounded-full cursor-pointer"
  >
    <FaBars />
  </div>
  <nav
    id={`--c2dev-${idPrefix}navbar-nav`}
    class="navbar-home mr-4 lg:mr-16 resp:hidden"
  >
    <ul class="flex items-center resp:mt-5 resp:flex-col">
      <li class="my-2.5">
        <a
          href="/"
          class="text-2xl font-medium ml-10 hover:text-blue-700 hover:transition-all duration-300 resp:m-0"
        >
          Inicio
        </a>
      </li>
      <li class="my-2.5">
        <a
          id={`--c2dev-${idPrefix}navbar-header-item-servicios`}
          href="#servicios"
          class="text-2xl font-medium ml-10 hover:text-blue-700 hover:transition-all duration-300 resp:m-0"
        >
          Servicios
        </a>
      </li>
      <li class="my-2.5">
        <a
          href="/proyectos/"
          class="text-2xl font-medium ml-10 hover:text-blue-700 hover:transition-all duration-300 resp:m-0"
        >
          Proyectos
        </a>
      </li>
      <li class="my-2.5">
        <a
          href="/acerca-de/"
          class="text-2xl font-medium ml-10 mr-6 hover:text-blue-700 hover:transition-all duration-300 resp:m-0"
        >
          Acerca de nosotros
        </a>
      </li>
    </ul>
  </nav>
</header>
{
  !invisible && (
    <div
      id="--c2dev-navbar-header-item-servicios-popover"
      class="hidden z-[200] w-max top-0 left-0 p-5 rounded-xl drop-shadow-xl bg-white text-black border border-gray-200"
    >
      <div class="mb-4">
        <a
          href="/servicios/paginas-web"
          class="font-['Smooch_Sans'] font-regular text-2xl hover:text-blue-700 hover:transition-all duration-300 mt-4"
        >
          <div class="flex gap-4 items-center">
            <div class="bg-blue-500 w-[3rem] h-[3rem] rounded-full text-white flex items-center justify-center">
              <MdDevices />
            </div>
            <span>Páginas Web</span>
          </div>
        </a>
      </div>
      <div class="mb-4">
        <a
          href="/servicios/aplicaciones-moviles"
          class="font-['Smooch_Sans'] font-regular text-2xl hover:text-blue-700 hover:transition-all duration-300 "
        >
          <div class="flex gap-4 items-center">
            <div class="bg-yellow-400 w-[3rem] h-[3rem] rounded-full text-black flex items-center justify-center">
              <MdPhoneIphone />
            </div>
            <span>Aplicaciones Móviles</span>
          </div>
        </a>
      </div>
      <div class="mb-4">
        <a
          href="/servicios/catalogos"
          class="font-['Smooch_Sans'] font-regular text-2xl hover:text-blue-700 hover:transition-all duration-300"
        >
          <div class="flex gap-4 items-center">
            <div class="bg-violet-700 w-[3rem] h-[3rem] rounded-full text-white flex items-center justify-center">
              <MdApps />
            </div>
            <span>Catálogos y Portafolios</span>
          </div>
        </a>
      </div>
      <div>
        <a
          href="/servicios/e-commerce"
          class="font-['Smooch_Sans'] font-regular text-2xl hover:text-blue-700 hover:transition-all duration-300"
        >
          <div class="flex gap-4 items-center">
            <div class="bg-green-500 w-[3rem] h-[3rem] rounded-full text-white flex items-center justify-center">
              <FaStore />
            </div>
            <span>E-Commerce</span>
          </div>
        </a>
      </div>
      <div
        id="--c2dev-navbar-header-item-servicios-popover-arrow"
        class="absolute z-[150] w-8 h-8 rotate-45 bg-white border-t border-l border-gray-200"
      />
    </div>
  )
}
<script>
  // Floating UI JS
  declare const FloatingUIDOM: any;
  type FloatingUIComputedPosition = {
    x: number;
    y: number;
    placement: string;
    middlewareData: {
      arrow: {
        x: number;
        y: number;
      };
    };
  };
  const placementTranslator: any = {
    top: "bottom",
    right: "left",
    bottom: "top",
    left: "right",
  };

  let statePopoverOpen: boolean = false;
  let popoverCleanup: any = null;

  let __c2dev_navbar_servicios!: HTMLElement;
  let __c2dev_navbar_servicios_popover!: HTMLElement;
  let __c2dev_navbar_servicios_popover_arrow!: HTMLElement;

  const popoverMenu = (() => {
    const _updatePopverMenu = (stateIsOpen: boolean) => {
      const __inner = (isOpen: boolean) => {
        const update = () => {
          popoverCleanup = FloatingUIDOM.autoUpdate(
            __c2dev_navbar_servicios,
            __c2dev_navbar_servicios_popover,
            () => {
              FloatingUIDOM.computePosition(
                __c2dev_navbar_servicios,
                __c2dev_navbar_servicios_popover,
                {
                  placement: "bottom",
                  middleware: [
                    FloatingUIDOM.offset(30),
                    FloatingUIDOM.flip(),
                    FloatingUIDOM.shift({ padding: 5 }),
                    FloatingUIDOM.arrow({
                      element: __c2dev_navbar_servicios_popover_arrow,
                    }),
                  ],
                }
              ).then(
                ({
                  x,
                  y,
                  placement,
                  middlewareData,
                }: FloatingUIComputedPosition) => {
                  Object.assign(__c2dev_navbar_servicios_popover.style, {
                    left: `${x}px`,
                    top: `${y}px`,
                  });

                  const { x: arrowX, y: arrowY } = middlewareData.arrow;
                  const staticSide: string =
                    placementTranslator[placement.split("-")[0] as string];
                  Object.assign(__c2dev_navbar_servicios_popover_arrow.style, {
                    left: arrowX != null ? `${arrowX}px` : "",
                    top: arrowY != null ? `${arrowY}px` : "",
                    right: "",
                    bottom: "",
                    [staticSide]: "-16px",
                  });
                }
              );
            }
          );
        };
        const popoverVis = (isOpen: boolean) => {
          return isOpen ? "absolute" : "hidden";
        };

        __c2dev_navbar_servicios_popover.classList.replace(
          popoverVis(!isOpen),
          popoverVis(isOpen)
        );

        if (isOpen) {
          update();
        } else if (popoverCleanup !== null && popoverCleanup !== undefined) {
          popoverCleanup();
          popoverCleanup = null;
        }
      };

      __inner(stateIsOpen);
      return stateIsOpen;
    };
    const toggle = () => {
      statePopoverOpen = _updatePopverMenu(!statePopoverOpen);
    };
    const open = () => {
      statePopoverOpen = true;
      _updatePopverMenu(true);
    };
    const close = () => {
      statePopoverOpen = false;
      _updatePopverMenu(false);
    };

    return { toggle: toggle, open: open, close: close };
  })();

  document.addEventListener("DOMContentLoaded", (_event) => {
    const eatEvent = (f: () => void) => {
      return (ev: Event) => {
        ev.preventDefault();
        f();
      };
    };

    __c2dev_navbar_servicios = document.getElementById(
      "--c2dev-navbar-header-item-servicios"
    )!!;
    __c2dev_navbar_servicios_popover = document.getElementById(
      "--c2dev-navbar-header-item-servicios-popover"
    )!!;
    __c2dev_navbar_servicios_popover_arrow = document.getElementById(
      "--c2dev-navbar-header-item-servicios-popover-arrow"
    )!!;

    __c2dev_navbar_servicios.addEventListener(
      "click",
      eatEvent(popoverMenu.toggle)
    );
  });
</script>
